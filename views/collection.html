{% extends "base.html" %}
{% import '_snippets.html' as snippets %}

{% block title %}
{{ item.title }}
{% endblock %}

{% block bodyclass %}search{% endblock %}

{% block content %}

<!-- Accordion JS -->
<script>
  $(function() {
	var Accordion = function(el, multiple) {
		this.el = el || {};
		this.multiple = multiple || false;

		// Variables privadas
		var links = this.el.find('.link');
		// Evento
		links.on('click', {el: this.el, multiple: this.multiple}, this.dropdown)
	}

	Accordion.prototype.dropdown = function(e) {
		var $el = e.data.el;
			$this = $(this),
			$next = $this.next();

		$next.slideToggle();
		$this.parent().toggleClass('open');

		if (!e.data.multiple) {
			$el.find('.submenu').not($next).slideUp().parent().removeClass('open');
		};
	}	

	var accordion = new Accordion($('#accordion'), false);
});

// Events
$('.dropdown-container')
	.on('click', '.dropdown-button', function() {
        $(this).siblings('.dropdown-list').toggle();
	})
	.on('input', '.dropdown-search', function() {
    	var target = $(this);
        var dropdownList = target.closest('.dropdown-list');
    	var search = target.val().toLowerCase();
    
    	if (!search) {
            dropdownList.find('li').show();
            return false;
        }
    
    	dropdownList.find('li').each(function() {
        	var text = $(this).text().toLowerCase();
            var match = text.indexOf(search) > -1;
            $(this).toggle(match);
        });
	})
	.on('change', '[type="checkbox"]', function() {
        var container = $(this).closest('.dropdown-container');
        var numChecked = container. find('[type="checkbox"]:checked').length;
    	container.find('.quantity').text(numChecked || 'Any');
	});

</script>

<!-- breadcrumb -->
<div class="container" id="bread-crumb">
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="/">Beranda</a></li>
      <li class="breadcrumb-item active" aria-current="page"><a href="/collections/{{ item.name }}">{{ item.title }}</a></li>
    </ol>
  </nav>  
</div>

<!-- collection page test placeholder -->
<div class="container">
  <div class="inner_container">
    <div class="row">

      <div class="col-sm-3 profile">
        <div class="row">
          <div class="col-sm-12 col-xs-6">
            <img src="{{ item.image }}" class="img-responsive">
          </div>
          <div class="col-sm-12 col-xs-6">
            <h2 class="owner">Kategori: {{ item.title }}</h2>
          </div>
                      <!--Accordion-->
                      <ul id="accordion" class="accordion">
                        <li>
                          <div class="link"><i class="fa fa-users" id="icon-topik"></i>Budaya dan Agama<i class="fa fa-chevron-down"></i></div>
                          <ul class="submenu">
                            <li><a href="#">Agama</a></li>
                            <li><a href="#">Kebudayaan</a></li>
                            <li><a href="#">Olahraga</a></li>
                          </ul>
                        </li>
                        <li>
                          <div class="link"><i class="fa fa-coins"></i>Ekonomi dan Industri<i class="fa fa-chevron-down"></i></div>
                          <ul class="submenu">
                            <li><a href="/data/group/industri">Industri</a></li>
                            <li><a href="#">Perdagangan</a></li>
                            <li><a href="#">Pertanian</a></li>
                            <li><a href="#">Perkebunan</a></li>
                            <li><a href="#">Peternakan</a></li>
                            <li><a href="#">Perikanan</a></li>
                            <li><a href="#">Badan Usaha Milik Rakyat</a></li>
                            <li><a href="#">Investasi</a></li>
                            <li><a href="#">Koperasi</a></li>
                            <li><a href="#">Usaha Kecil dan Menengah</a></li>
                            <li><a href="#">Pariwisata</a></li>
                          </ul>
                        </li>
                        <li>
                          <div class="link"><i class="fa fa-bus"></i>Ketertiban Umum dan Keselamatan<i class="fa fa-chevron-down"></i></div>
                          <ul class="submenu">
                            <li><a href="#">Hukum</a></li>
                            <li><a href="#">Keamanan</a></li>
                            <li><a href="#">Hak Asasi Manusia</a></li>
                          </ul>
                        </li>
                        <li>
                          <div class="link"><i class="fa fa-tree"></i>Lingkungan dan Sumber Daya Alam<i class="fa fa-chevron-down"></i></div>
                          <ul class="submenu">
                            <li><a href="#">Pertambangan</a></li>
                            <li><a href="#">Energi</a></li>
                            <li><a href="#">Kehutanan</a></li>
                            <li><a href="#">Kelautan</a></li>
                            <li><a href="#">Lingkungan Hidup</a></li>
                          </ul>
                        </li>
                        <li>
                          <div class="link"><i class="fa fa-building"></i>Pembangunan Daerah<i class="fa fa-chevron-down"></i></div>
                          <ul class="submenu">
                            <li><a href="#">Pekerjaan Umum</a></li>
                            <li><a href="#">Transmigrasi</a></li>
                            <li><a href="#">Transportasi</a></li>
                            <li><a href="#">Perumahan</a></li>
                            <li><a href="#">Kawasan/Daerah Tertinggal</a></li>
                          </ul>
                        </li>
                        <li>
                          <div class="link"><i class="fa fa-chart-line"></i>Pemerintahan Umum<i class="fa fa-chevron-down"></i></div>
                          <ul class="submenu">
                            <li><a href="#">Dalam Negeri</a></li>
                            <li><a href="#">Keuangan</a></li>
                            <li><a href="#">Informasi</a></li>                    <li><a href="#">Javascript</a></li>
                            <li><a href="#">Komunikasi</a></li>
                            <li><a href="#">Perencanaan Pembangunan Nasional</a></li>
                            <li><a href="#">Aparatur Negara</a></li>
                            <li><a href="#">Kesekretariatan Negara</a></li>
                            <li><a href="#">Pertanahan</a></li>
                            <li><a href="#">Kependudukan</a></li>
                          </ul>
                        </li>
                        <li>
                          <div class="link"><i class="fa fa-user-graduate"></i>Pendidikan dan Tenaga Kerja<i class="fa fa-chevron-down"></i></div>
                          <ul class="submenu">
                            <li><a href="#">Pendidikan</a></li>
                            <li><a href="#">Ketenagakerjaan</a></li>
                            <li><a href="#">Ilmu Pengetahuan</a></li>
                            <li><a href="#">Teknologi</a></li>
                            <li><a href="#">Pemuda</a></li>
                          </ul>
                        </li>
                        <li>
                          <div class="link"><i class="fa fa-laptop"></i>Pendukung Umum<i class="fa fa-chevron-down"></i></div>
                          <ul class="submenu">
                            <li><a href="#">Kebijakan Pemerintah</a></li>
                            <li><a href="#">Manajemen Kegiatan</a></li>
                            <li><a href="#">Kewilayahan</a></li>
                            <li><a href="#">Data Dukung Lainnya</a></li>
                          </ul>
                        </li>
                        <li>
                          <div class="link"><i class="fa fa-heartbeat"></i>Perlindungan Sosial dan Kesehatan<i class="fa fa-chevron-down"></i></div>
                          <ul class="submenu">
                            <li><a href="/data/group/kesehatan">Kesehatan</a></li>
                            <li><a href="#">Kesehatan</a></li>
                            <li><a href="#">Sosial</a></li>
                            <li><a href="#">Pemberdayaan Perempuan</a></li>
                          </ul>
                        </li>
                        <li>
                          <div class="link"><i class="fa fa-lock"></i>Pertahanan dan Luar Negeri<i class="fa fa-chevron-down"></i></div>
                          <ul class="submenu">
                            <li><a href="#">Pertahanan</a></li>
                            <li><a href="#">Luar Negeri</a></li>
                          </ul>
                        </li>
                      </ul> 
        </div>
      </div>

      <div class="col-sm-offset-1 col-sm-8">
        <div class="row">
          <div class="col-sm-6 col-xs-12">
            <h2 class="owner-page-title">{{result.count}} dataset ditemukan </h2>
          </div>
          <div class="col-sm-6">
            <form class="search-form form form-inline" class="input-group col-xs-12" action="/collections/{{ item.name }}" method="GET">
              <input type="text" class="form-control" placeholder="Search..." name="q" required autofocus/>
            </form>
          </div>
        </div>

        <div id="publisher-package-list">

          {% if result.count > 0 %}
            <section class="search-page">
              <section class="results">
                {{ snippets.package_list_show(result.results) }}
              </section>
            </section>
            <!-- Pagination -->
            {% if result.count > 10 %}
              {% set path = 'collections/' + item.name %}
              {{ snippets.pagination(query.q, pages, result, path) }}
            {% endif %}
            <!-- end of pagination -->
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
